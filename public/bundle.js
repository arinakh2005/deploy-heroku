(()=>{"use strict";var e={307:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Cell=void 0,t.Cell=class{constructor(e){this.isOccupied=!1,this.occupiedBy="unknown",this.id=e}setCellOccupied(){this.isOccupied=!0}setCellOccupiedByElement(e){this.occupiedBy=e}isCellOccupied(){return this.isOccupied}}},471:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ComputerPlayer=void 0;const s=l(756),i=l(78);class a extends s.Player{constructor(){super(0)}doComputerStep(e,t){let l=this.generateNumberOfCell(e.length);if(e[l].isCellOccupied())this.doComputerStep(e,t);else{let s=`cell${l}`;document.getElementById(s).innerHTML=`<img src="./images/${i.gameMark.circle}.png" alt="${i.gameMark.circle}">`,e[l].setCellOccupied(),e[l].setCellOccupiedByElement(i.gameMark.circle),t.isGameOver()}}generateNumberOfCell(e){return Math.floor(Math.random()*e)}}t.ComputerPlayer=a},53:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const s=l(208),i=l(78),a=l(756),r=l(471),n=l(519);t.Game=class{constructor(){this.lastRole=i.gameMark.circle}setGameMap(e,t){this.gameMap=new s.GameMap(e,t)}getGameMap(){return this.gameMap}setMode(e){this.mode=e}getMode(){return this.mode}setFirstPlayer(e){this.firstPlayer=new a.Player(e)}getFirstPlayer(){return this.firstPlayer}setSecondPlayer(e){this.secondPlayer=0===e?new r.ComputerPlayer:new a.Player(e)}getSecondPlayer(){return this.secondPlayer}setPlayerWhoMadeLastStep(e){this.playerWhoMadeLastStep=new a.Player(e)}getPlayerWhoMadeLastStep(){return this.playerWhoMadeLastStep}startNewGame(e){if(e)confirm("У Вас є незавершена гра. Продовжити грати?")?this.resumeGameFromLocalStorage():(window.localStorage.clear(),this.startNewGame());else{let e=document.getElementById("game-area");const t=+e.value;e=document.getElementById("number-of-cells-for-win");const l=+e.value;this.setGameMap(t,l),e=document.getElementById("game-mode"),this.setMode(+e.value),this.getGameMap().buildGameMap(0),this.getMode()===i.gameMode.playerWithPlayer?(this.setFirstPlayer(i.playerType.player1),this.setSecondPlayer(i.playerType.player2),this.setPlayerWhoMadeLastStep(i.playerType.player2)):this.getMode()===i.gameMode.playerWithComputer&&(this.setFirstPlayer(i.playerType.player),this.setSecondPlayer(i.playerType.computer),this.setPlayerWhoMadeLastStep(i.playerType.computer))}document.getElementById("btn-start").setAttribute("disabled","true"),document.getElementById("btn-clear").removeAttribute("disabled")}doStep(e){this.gameMap.isCellAvailableForStep(e)||(this.mode===i.gameMode.playerWithPlayer?(document.getElementById("player-number").innerText=`Хід: гравець ${this.playerWhoMadeLastStep.getPlayerType()}`,this.doStepInModePlayerWithPlayer(e),this.isGameOver()):this.mode===i.gameMode.playerWithComputer&&this.doStepInModePlayerWithComputer(e),this.putOnLocalStorage(this))}doStepInModePlayerWithPlayer(e){let t=document.getElementById(e);this.gameMap.getOccupiedCells().push(e);let l=+e.slice(4,6);this.getGameMap().getAllCells()[l].setCellOccupied(),this.playerWhoMadeLastStep.getPlayerType()===this.firstPlayer.getPlayerType()?(t.innerHTML=`<img src="images/${i.gameMark.circle}.png" alt="${i.gameMark.circle}">`,this.getGameMap().getAllCells()[l].setCellOccupiedByElement(i.gameMark.circle),this.playerWhoMadeLastStep=this.secondPlayer):(this.lastRole=i.gameMark.cross,t.innerHTML=`<img src="images/${i.gameMark.cross}.png" alt="${i.gameMark.cross}">`,this.getGameMap().getAllCells()[l].setCellOccupiedByElement(i.gameMark.cross),this.playerWhoMadeLastStep=this.firstPlayer)}doStepInModePlayerWithComputer(e){if(this.playerWhoMadeLastStep.getPlayerType()===this.secondPlayer.getPlayerType()){document.getElementById(e).innerHTML=`<img src="images/${i.gameMark.cross}.png" alt="${i.gameMark.cross}">`;let t=+e.slice(4,6);this.gameMap.getAllCells()[t].setCellOccupied(),this.gameMap.getAllCells()[t].setCellOccupiedByElement(i.gameMark.cross),this.playerWhoMadeLastStep=this.firstPlayer}this.isGameOver()||this.secondPlayer instanceof r.ComputerPlayer&&(this.playerWhoMadeLastStep=this.secondPlayer,this.secondPlayer.doComputerStep(this.gameMap.getAllCells(),this))}isGameOver(){let e=!1;if(this.getGameMap().isPlayerWon()===this.getGameMap().getNobodyWonFlag())setTimeout(this.getDrawMessage,200),setTimeout(n.restartGame,500),e=!0;else if(this.getGameMap().isPlayerWon()){let t=this;setTimeout((function(){t.getWinnerMessage()}),200),setTimeout(n.restartGame,500),e=!0}return e}getWinnerMessage(){this.getMode()===i.gameMode.playerWithComputer?this.getPlayerWhoMadeLastStep().getPlayerType()===i.playerType.computer?alert("Переміг комп'ютер!"):alert("Переміг гравець!"):alert(`Переміг гравець ${this.getPlayerWhoMadeLastStep().getPlayerType()}`)}getDrawMessage(){alert("Нічия")}clearGame(){this.gameMap.clearGameMap()}putOnLocalStorage(e){window.localStorage.clear();const t={currentCell:e.getGameMap().getCurrentCell(),allCells:e.getGameMap().getAllCells(),occupiedCells:e.getGameMap().getOccupiedCells(),numberOfCellsToWin:e.getGameMap().getNumberOfCellsToWin(),nobodyWonFlag:e.getGameMap().getNobodyWonFlag(),size:e.getGameMap().size,numberOfCellsForWin:e.getGameMap().getNumberOfCellsToWin()},l={mode:e.getMode(),gameMap:t,firstPlayer:e.getFirstPlayer(),secondPlayer:e.getSecondPlayer(),playerWhoMadeLastStep:e.getPlayerWhoMadeLastStep(),lastRole:e.lastRole};window.localStorage.setItem("game",JSON.stringify(l)),window.localStorage.setItem("gameMap",JSON.stringify(t)),window.localStorage.setItem("prevSize",JSON.stringify(t.size)),window.localStorage.setItem("numberOfCellsForWin",JSON.stringify(t.numberOfCellsForWin)),window.localStorage.setItem("gameModeLocal",JSON.stringify(l.mode)),window.localStorage.setItem("haveUnfinishedGame",JSON.stringify(!0))}resumeGameFromLocalStorage(){let e=JSON.parse(window.localStorage.getItem("prevSize")||"{}"),t=JSON.parse(window.localStorage.getItem("gameModeLocal")||"{}"),l=JSON.parse(window.localStorage.getItem("numberOfCellsForWin")||"{}"),s=JSON.parse(window.localStorage.getItem("game")||"{}"),a=JSON.parse(window.localStorage.getItem("gameMap")||"{}");this.setGameMap(e,l),this.setMode(s.mode),this.setFirstPlayer(s.firstPlayer.playerType),this.setSecondPlayer(s.secondPlayer.playerType),this.setPlayerWhoMadeLastStep(s.playerWhoMadeLastStep.playerType),this.getGameMap().setAllCells(a.allCells),this.getGameMap().setOccupiedCells(a.occupiedCells),this.getGameMap().buildGameMap(1),document.getElementById("game-mode").value=t,document.getElementById("game-area").value=e,document.getElementById("number-of-cells-for-win").value=l;let r,n=document.getElementById("player-number");this.getMode()===i.gameMode.playerWithPlayer?(r=this.getPlayerWhoMadeLastStep().getPlayerType()===this.getFirstPlayer().getPlayerType()?this.getSecondPlayer().getPlayerType():this.getFirstPlayer().getPlayerType(),n.innerText=`Хід: гравець ${r}`):n.innerText="Хід: ... "}}},208:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameMap=void 0;const s=l(307),i=l(78),a=l(519);t.GameMap=class{constructor(e,t){this.nobodyWonFlag=-1,this.occupiedCells=[],this.allCells=[];let l=document.getElementById("game-area");e<i.minMapSize?(this.size=i.minMapSize,l.value=String(i.minMapSize),alert(`Мінімальний розмір поля ${i.minMapSize}х${i.minMapSize}!`)):e>i.maxMapSize?(this.size=i.maxMapSize,l.value=String(i.maxMapSize),alert(`Максимальний розмір поля ${i.maxMapSize}х${i.maxMapSize}!`)):this.size=e;let s=document.getElementById("number-of-cells-for-win");t<i.minNumberOfCellsForWin?(this.numberOfCellsToWin=i.minNumberOfCellsForWin,s.value=String(i.minNumberOfCellsForWin),alert(`Мінімальна к-сть клітинок для виграшу ${i.minNumberOfCellsForWin}!`)):t>this.size?(this.numberOfCellsToWin=this.size,s.value=String(this.size),alert(`Максимальна к-сть клітинок для виграшу ${this.size}!`)):this.numberOfCellsToWin=t}buildGameMap(e){let t=[];const l=document.querySelector("table");for(let r=0;r<this.size;r++){const n=document.createElement("div");n.classList.add("tr");for(let l=0;l<this.size;l++){const o=document.createElement("div");o.classList.add("cell"),o.classList.add("td");let m=`cell${r*this.size+l}`;o.setAttribute("id",`${m}`),this.currentCell=new s.Cell(m),1===e&&(this.allCells[r*this.size+l].occupiedBy===i.gameMark.cross&&(this.currentCell.setCellOccupied(),this.currentCell.setCellOccupiedByElement(i.gameMark.cross),o.innerHTML=`<img src="images/${i.gameMark.cross}.png" alt="${i.gameMark.cross}">`),this.allCells[r*this.size+l].occupiedBy===i.gameMark.circle&&(this.currentCell.setCellOccupied(),this.currentCell.setCellOccupiedByElement(i.gameMark.circle),o.innerHTML=`<img src="images/${i.gameMark.circle}.png" alt="${i.gameMark.circle}">`),t.push(this.currentCell)),o.addEventListener("click",(()=>{(0,a.doStep)(m)})),0===e&&this.allCells.push(this.currentCell),n.appendChild(o)}l.appendChild(n)}this.setSizeForCell(),1===e&&(this.allCells=t),document.querySelector(".game-area").style.visibility="visible"}clearGameMap(){window.localStorage.clear();let e=document.getElementsByClassName("game-area__table")[0];e.parentNode.removeChild(e);let t=document.getElementsByClassName("game-area")[0];const l=document.createElement("table");l.classList.add("game-area__table"),t.appendChild(l),e=document.getElementById("player-number"),e.parentNode.removeChild(e);const s=document.createElement("p");s.id="player-number",s.textContent="Хід: ...",s.classList.add("game-area__player-number"),t.appendChild(s),this.allCells=[],this.occupiedCells=[],this.currentCell=null,document.getElementById("btn-start").setAttribute("disabled","false")}isPlayerWon(){return!!this.wonInRow()||!!this.wonInColumn()||!!this.wonInMainDiagonal()||!!this.wonInAntiDiagonal()||(this.isAllCellsFilled()?this.nobodyWonFlag:void 0)}isCellAvailableForStep(e){let t=+e.slice(4,6);if(this.allCells[t].isCellOccupied())return!0}isAllCellsFilled(){let e=0;return this.allCells.forEach((function(t){!0===t.isOccupied&&e++})),e===this.size**2}getCurrentCell(){return this.currentCell}setCurrentCell(e){this.currentCell=new s.Cell(e)}getAllCells(){return this.allCells}setAllCells(e){this.allCells=e}getOccupiedCells(){return this.occupiedCells}setOccupiedCells(e){this.occupiedCells=e}getNumberOfCellsToWin(){return this.numberOfCellsToWin}setNumberOfCellsToWin(e){this.numberOfCellsToWin=e}getNobodyWonFlag(){return this.nobodyWonFlag}checkWinCombinations(e){return!!e.every((e=>e.occupiedBy===i.gameMark.circle))||!!e.every((e=>e.occupiedBy===i.gameMark.cross))||void 0}wonInRow(){let e=0,t=[];do{for(let l=this.size-this.numberOfCellsToWin-e;l<this.size*this.size;l+=this.size){for(let e=l;e<l+this.numberOfCellsToWin;e++)if(t.push(this.allCells[e]),!0===this.checkWinCombinations(t)&&t.length===this.numberOfCellsToWin)return!0;t=[]}e++}while(this.size-this.numberOfCellsToWin-e>=0)}wonInColumn(){let e=this.size-this.numberOfCellsToWin,t=[];for(let l=0;l<this.size*(e+1);l++){for(let e=l;e<this.size**2;e+=this.size)t.length<this.numberOfCellsToWin&&t.push(this.allCells[e]);if(!0===this.checkWinCombinations(t)&&t.length===this.numberOfCellsToWin)return!0;t=[]}}wonInMainDiagonal(){let e=[],t=this.fillArrOfAllowableIndexesInMainDiagonal();for(let l=0;l<this.size**2;l++){for(let s=t[l];s<this.size**2;s+=this.size+1)e.length<this.numberOfCellsToWin&&e.push(this.allCells[s]);if(!0===this.checkWinCombinations(e)&&e.length===this.numberOfCellsToWin)return!0;e=[]}}fillArrOfAllowableIndexesInMainDiagonal(){let e=[],t=this.size-this.numberOfCellsToWin,l=0;for(;t>0;)e.push(l++),t--;for(t=this.size-this.numberOfCellsToWin,e.push(l),l=this.size;l<this.size**2;l++){if(0===t)return e;if(this.size%l==0||l%this.size==0){for(e.push(l);t>0;)e.push(++l),t--;if(t=this.size-this.numberOfCellsToWin,e.length>=(t+1)**2)return e}}}wonInAntiDiagonal(){let e=[],t=this.fillArrOfAllowableIndexesInAntiDiagonal().sort((function(e,t){return e-t}));for(let l=0;l<this.size**2;l++){for(let s=t[l];s<this.size**2;s+=this.size-1)e.length<this.numberOfCellsToWin&&e.push(this.allCells[s]);if(!0===this.checkWinCombinations(e)&&e.length===this.numberOfCellsToWin)return!0;e=[]}}fillArrOfAllowableIndexesInAntiDiagonal(){let e,t=[],l=this.size-this.numberOfCellsToWin;for(let s=this.size;s<this.size**2;s++){if(0===l)return t.push(this.size-1),t;if(this.size%s==0||s%this.size==0){for(s-=1,t.push(s),e=s;l>0;)t.push(--s),l--;if(l=this.size-this.numberOfCellsToWin,s=e+this.size,t.length>=(l+1)**2)return t}}}setSizeForCell(){let e=document.getElementsByClassName("td");for(let t=0;t<e.length;t++){let l=e[t];this.size<15?l.setAttribute("style","width: 4em; height: 4em"):this.size>30?l.setAttribute("style","width: 3em; height: 3em"):this.size>45?l.setAttribute("style","width: 2em; height: 2em"):this.size>60?l.setAttribute("style","width: 1em; height: 1em"):this.size>75&&l.setAttribute("style","width: 0.5em; height: 0.5em")}}}},756:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0,t.Player=class{constructor(e){this.playerType=e}getPlayerType(){return this.playerType}}},78:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.playerType=t.gameMode=t.gameMark=t.minNumberOfCellsForWin=t.maxMapSize=t.minMapSize=void 0,t.minMapSize=3,t.maxMapSize=100,t.minNumberOfCellsForWin=2,t.gameMark={cross:"cross",circle:"circle"},t.gameMode={playerWithPlayer:0,playerWithComputer:1},t.playerType={computer:0,player:3,player1:1,player2:2}},519:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.restartGame=t.doStep=t.createNewGame=void 0;const s=l(53);let i;function a(){let e=JSON.parse(window.localStorage.getItem("haveUnfinishedGame"));i=new s.Game,i.startNewGame(e)}function r(){i&&i.clearGame(),a()}t.createNewGame=a,t.doStep=function(e){i.doStep(e)},t.restartGame=r,document.getElementById("btn-start").addEventListener("click",a),document.getElementById("btn-clear").addEventListener("click",r),document.getElementById("game-area").addEventListener("change",r),document.getElementById("number-of-cells-for-win").addEventListener("change",r),document.getElementById("game-mode").addEventListener("change",r)}},t={};!function l(s){var i=t[s];if(void 0!==i)return i.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,l),a.exports}(519)})();